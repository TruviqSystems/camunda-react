{"ast":null,"code":"var ELEMENT_ID = 'data-element-id';\nimport { attr as svgAttr } from 'tiny-svg';\n\n/**\n * @class\n *\n * A registry that keeps track of all shapes in the diagram.\n */\nexport default function ElementRegistry(eventBus) {\n  this._elements = {};\n  this._eventBus = eventBus;\n}\nElementRegistry.$inject = ['eventBus'];\n\n/**\n * Register a pair of (element, gfx, (secondaryGfx)).\n *\n * @param {djs.model.Base} element\n * @param {SVGElement} gfx\n * @param {SVGElement} [secondaryGfx] optional other element to register, too\n */\nElementRegistry.prototype.add = function (element, gfx, secondaryGfx) {\n  var id = element.id;\n  this._validateId(id);\n\n  // associate dom node with element\n  svgAttr(gfx, ELEMENT_ID, id);\n  if (secondaryGfx) {\n    svgAttr(secondaryGfx, ELEMENT_ID, id);\n  }\n  this._elements[id] = {\n    element: element,\n    gfx: gfx,\n    secondaryGfx: secondaryGfx\n  };\n};\n\n/**\n * Removes an element from the registry.\n *\n * @param {djs.model.Base} element\n */\nElementRegistry.prototype.remove = function (element) {\n  var elements = this._elements,\n    id = element.id || element,\n    container = id && elements[id];\n  if (container) {\n    // unset element id on gfx\n    svgAttr(container.gfx, ELEMENT_ID, '');\n    if (container.secondaryGfx) {\n      svgAttr(container.secondaryGfx, ELEMENT_ID, '');\n    }\n    delete elements[id];\n  }\n};\n\n/**\n * Update the id of an element\n *\n * @param {djs.model.Base} element\n * @param {string} newId\n */\nElementRegistry.prototype.updateId = function (element, newId) {\n  this._validateId(newId);\n  if (typeof element === 'string') {\n    element = this.get(element);\n  }\n  this._eventBus.fire('element.updateId', {\n    element: element,\n    newId: newId\n  });\n  var gfx = this.getGraphics(element),\n    secondaryGfx = this.getGraphics(element, true);\n  this.remove(element);\n  element.id = newId;\n  this.add(element, gfx, secondaryGfx);\n};\n\n/**\n * Update the graphics of an element\n *\n * @param {djs.model.Base} element\n * @param {SVGElement} gfx\n * @param {boolean} [secondary=false] whether to update the secondary connected element\n */\nElementRegistry.prototype.updateGraphics = function (filter, gfx, secondary) {\n  var id = filter.id || filter;\n  var container = this._elements[id];\n  if (secondary) {\n    container.secondaryGfx = gfx;\n  } else {\n    container.gfx = gfx;\n  }\n  svgAttr(gfx, ELEMENT_ID, id);\n  return gfx;\n};\n\n/**\n * Return the model element for a given id or graphics.\n *\n * @example\n *\n * elementRegistry.get('SomeElementId_1');\n * elementRegistry.get(gfx);\n *\n *\n * @param {string|SVGElement} filter for selecting the element\n *\n * @return {djs.model.Base}\n */\nElementRegistry.prototype.get = function (filter) {\n  var id;\n  if (typeof filter === 'string') {\n    id = filter;\n  } else {\n    id = filter && svgAttr(filter, ELEMENT_ID);\n  }\n  var container = this._elements[id];\n  return container && container.element;\n};\n\n/**\n * Return all elements that match a given filter function.\n *\n * @param {Function} fn\n *\n * @return {Array<djs.model.Base>}\n */\nElementRegistry.prototype.filter = function (fn) {\n  var filtered = [];\n  this.forEach(function (element, gfx) {\n    if (fn(element, gfx)) {\n      filtered.push(element);\n    }\n  });\n  return filtered;\n};\n\n/**\n * Return the first element that satisfies the provided testing function.\n *\n * @param {Function} fn\n *\n * @return {djs.model.Base}\n */\nElementRegistry.prototype.find = function (fn) {\n  var map = this._elements,\n    keys = Object.keys(map);\n  for (var i = 0; i < keys.length; i++) {\n    var id = keys[i],\n      container = map[id],\n      element = container.element,\n      gfx = container.gfx;\n    if (fn(element, gfx)) {\n      return element;\n    }\n  }\n};\n\n/**\n * Return all rendered model elements.\n *\n * @return {Array<djs.model.Base>}\n */\nElementRegistry.prototype.getAll = function () {\n  return this.filter(function (e) {\n    return e;\n  });\n};\n\n/**\n * Iterate over all diagram elements.\n *\n * @param {Function} fn\n */\nElementRegistry.prototype.forEach = function (fn) {\n  var map = this._elements;\n  Object.keys(map).forEach(function (id) {\n    var container = map[id],\n      element = container.element,\n      gfx = container.gfx;\n    return fn(element, gfx);\n  });\n};\n\n/**\n * Return the graphical representation of an element or its id.\n *\n * @example\n * elementRegistry.getGraphics('SomeElementId_1');\n * elementRegistry.getGraphics(rootElement); // <g ...>\n *\n * elementRegistry.getGraphics(rootElement, true); // <svg ...>\n *\n *\n * @param {string|djs.model.Base} filter\n * @param {boolean} [secondary=false] whether to return the secondary connected element\n *\n * @return {SVGElement}\n */\nElementRegistry.prototype.getGraphics = function (filter, secondary) {\n  var id = filter.id || filter;\n  var container = this._elements[id];\n  return container && (secondary ? container.secondaryGfx : container.gfx);\n};\n\n/**\n * Validate the suitability of the given id and signals a problem\n * with an exception.\n *\n * @param {string} id\n *\n * @throws {Error} if id is empty or already assigned\n */\nElementRegistry.prototype._validateId = function (id) {\n  if (!id) {\n    throw new Error('element must have an id');\n  }\n  if (this._elements[id]) {\n    throw new Error('element with id ' + id + ' already added');\n  }\n};","map":{"version":3,"names":["ELEMENT_ID","attr","svgAttr","ElementRegistry","eventBus","_elements","_eventBus","$inject","prototype","add","element","gfx","secondaryGfx","id","_validateId","remove","elements","container","updateId","newId","get","fire","getGraphics","updateGraphics","filter","secondary","fn","filtered","forEach","push","find","map","keys","Object","i","length","getAll","e","Error"],"sources":["C:/Users/KondalaRaoThota/camunda/camunda-7-code-examples/snippets/camunda-tasklist-examples/camunda-react-app/node_modules/diagram-js/lib/core/ElementRegistry.js"],"sourcesContent":["var ELEMENT_ID = 'data-element-id';\n\nimport { attr as svgAttr } from 'tiny-svg';\n\n\n/**\n * @class\n *\n * A registry that keeps track of all shapes in the diagram.\n */\nexport default function ElementRegistry(eventBus) {\n  this._elements = {};\n\n  this._eventBus = eventBus;\n}\n\nElementRegistry.$inject = [ 'eventBus' ];\n\n/**\n * Register a pair of (element, gfx, (secondaryGfx)).\n *\n * @param {djs.model.Base} element\n * @param {SVGElement} gfx\n * @param {SVGElement} [secondaryGfx] optional other element to register, too\n */\nElementRegistry.prototype.add = function(element, gfx, secondaryGfx) {\n\n  var id = element.id;\n\n  this._validateId(id);\n\n  // associate dom node with element\n  svgAttr(gfx, ELEMENT_ID, id);\n\n  if (secondaryGfx) {\n    svgAttr(secondaryGfx, ELEMENT_ID, id);\n  }\n\n  this._elements[id] = { element: element, gfx: gfx, secondaryGfx: secondaryGfx };\n};\n\n/**\n * Removes an element from the registry.\n *\n * @param {djs.model.Base} element\n */\nElementRegistry.prototype.remove = function(element) {\n  var elements = this._elements,\n      id = element.id || element,\n      container = id && elements[id];\n\n  if (container) {\n\n    // unset element id on gfx\n    svgAttr(container.gfx, ELEMENT_ID, '');\n\n    if (container.secondaryGfx) {\n      svgAttr(container.secondaryGfx, ELEMENT_ID, '');\n    }\n\n    delete elements[id];\n  }\n};\n\n/**\n * Update the id of an element\n *\n * @param {djs.model.Base} element\n * @param {string} newId\n */\nElementRegistry.prototype.updateId = function(element, newId) {\n\n  this._validateId(newId);\n\n  if (typeof element === 'string') {\n    element = this.get(element);\n  }\n\n  this._eventBus.fire('element.updateId', {\n    element: element,\n    newId: newId\n  });\n\n  var gfx = this.getGraphics(element),\n      secondaryGfx = this.getGraphics(element, true);\n\n  this.remove(element);\n\n  element.id = newId;\n\n  this.add(element, gfx, secondaryGfx);\n};\n\n/**\n * Update the graphics of an element\n *\n * @param {djs.model.Base} element\n * @param {SVGElement} gfx\n * @param {boolean} [secondary=false] whether to update the secondary connected element\n */\nElementRegistry.prototype.updateGraphics = function(filter, gfx, secondary) {\n  var id = filter.id || filter;\n\n  var container = this._elements[id];\n\n  if (secondary) {\n    container.secondaryGfx = gfx;\n  } else {\n    container.gfx = gfx;\n  }\n\n  svgAttr(gfx, ELEMENT_ID, id);\n\n  return gfx;\n};\n\n/**\n * Return the model element for a given id or graphics.\n *\n * @example\n *\n * elementRegistry.get('SomeElementId_1');\n * elementRegistry.get(gfx);\n *\n *\n * @param {string|SVGElement} filter for selecting the element\n *\n * @return {djs.model.Base}\n */\nElementRegistry.prototype.get = function(filter) {\n  var id;\n\n  if (typeof filter === 'string') {\n    id = filter;\n  } else {\n    id = filter && svgAttr(filter, ELEMENT_ID);\n  }\n\n  var container = this._elements[id];\n  return container && container.element;\n};\n\n/**\n * Return all elements that match a given filter function.\n *\n * @param {Function} fn\n *\n * @return {Array<djs.model.Base>}\n */\nElementRegistry.prototype.filter = function(fn) {\n\n  var filtered = [];\n\n  this.forEach(function(element, gfx) {\n    if (fn(element, gfx)) {\n      filtered.push(element);\n    }\n  });\n\n  return filtered;\n};\n\n/**\n * Return the first element that satisfies the provided testing function.\n *\n * @param {Function} fn\n *\n * @return {djs.model.Base}\n */\nElementRegistry.prototype.find = function(fn) {\n  var map = this._elements,\n      keys = Object.keys(map);\n\n  for (var i = 0; i < keys.length; i++) {\n    var id = keys[i],\n        container = map[id],\n        element = container.element,\n        gfx = container.gfx;\n\n    if (fn(element, gfx)) {\n      return element;\n    }\n  }\n};\n\n/**\n * Return all rendered model elements.\n *\n * @return {Array<djs.model.Base>}\n */\nElementRegistry.prototype.getAll = function() {\n  return this.filter(function(e) { return e; });\n};\n\n/**\n * Iterate over all diagram elements.\n *\n * @param {Function} fn\n */\nElementRegistry.prototype.forEach = function(fn) {\n\n  var map = this._elements;\n\n  Object.keys(map).forEach(function(id) {\n    var container = map[id],\n        element = container.element,\n        gfx = container.gfx;\n\n    return fn(element, gfx);\n  });\n};\n\n/**\n * Return the graphical representation of an element or its id.\n *\n * @example\n * elementRegistry.getGraphics('SomeElementId_1');\n * elementRegistry.getGraphics(rootElement); // <g ...>\n *\n * elementRegistry.getGraphics(rootElement, true); // <svg ...>\n *\n *\n * @param {string|djs.model.Base} filter\n * @param {boolean} [secondary=false] whether to return the secondary connected element\n *\n * @return {SVGElement}\n */\nElementRegistry.prototype.getGraphics = function(filter, secondary) {\n  var id = filter.id || filter;\n\n  var container = this._elements[id];\n  return container && (secondary ? container.secondaryGfx : container.gfx);\n};\n\n/**\n * Validate the suitability of the given id and signals a problem\n * with an exception.\n *\n * @param {string} id\n *\n * @throws {Error} if id is empty or already assigned\n */\nElementRegistry.prototype._validateId = function(id) {\n  if (!id) {\n    throw new Error('element must have an id');\n  }\n\n  if (this._elements[id]) {\n    throw new Error('element with id ' + id + ' already added');\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}