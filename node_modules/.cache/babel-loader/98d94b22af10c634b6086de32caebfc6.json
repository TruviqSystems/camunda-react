{"ast":null,"code":"import { hasPrimaryModifier, hasSecondaryModifier, isPrimaryButton } from '../../util/Mouse';\nimport { find, isArray } from 'min-dash';\nexport default function SelectionBehavior(eventBus, selection, canvas, elementRegistry) {\n  // Select elements on create\n  eventBus.on('create.end', 500, function (event) {\n    var context = event.context,\n      canExecute = context.canExecute,\n      elements = context.elements,\n      hints = context.hints || {},\n      autoSelect = hints.autoSelect;\n    if (canExecute) {\n      if (autoSelect === false) {\n        // Select no elements\n        return;\n      }\n      if (isArray(autoSelect)) {\n        selection.select(autoSelect);\n      } else {\n        // Select all elements by default\n        selection.select(elements.filter(isShown));\n      }\n    }\n  });\n\n  // Select connection targets on connect\n  eventBus.on('connect.end', 500, function (event) {\n    var context = event.context,\n      canExecute = context.canExecute,\n      hover = context.hover;\n    if (canExecute && hover) {\n      selection.select(hover);\n    }\n  });\n\n  // Select shapes on move\n  eventBus.on('shape.move.end', 500, function (event) {\n    var previousSelection = event.previousSelection || [];\n    var shape = elementRegistry.get(event.context.shape.id);\n\n    // Always select main shape on move\n    var isSelected = find(previousSelection, function (selectedShape) {\n      return shape.id === selectedShape.id;\n    });\n    if (!isSelected) {\n      selection.select(shape);\n    }\n  });\n\n  // Select elements on click\n  eventBus.on('element.click', function (event) {\n    if (!isPrimaryButton(event)) {\n      return;\n    }\n    var element = event.element;\n    if (element === canvas.getRootElement()) {\n      element = null;\n    }\n    var isSelected = selection.isSelected(element),\n      isMultiSelect = selection.get().length > 1;\n\n    // Add to selection if CTRL or SHIFT pressed\n    var add = hasPrimaryModifier(event) || hasSecondaryModifier(event);\n    if (isSelected && isMultiSelect) {\n      if (add) {\n        // Deselect element\n        return selection.deselect(element);\n      } else {\n        // Select element only\n        return selection.select(element);\n      }\n    } else if (!isSelected) {\n      // Select element\n      selection.select(element, add);\n    } else {\n      // Deselect element\n      selection.deselect(element);\n    }\n  });\n}\nSelectionBehavior.$inject = ['eventBus', 'selection', 'canvas', 'elementRegistry'];\nfunction isShown(element) {\n  return !element.hidden;\n}","map":{"version":3,"names":["hasPrimaryModifier","hasSecondaryModifier","isPrimaryButton","find","isArray","SelectionBehavior","eventBus","selection","canvas","elementRegistry","on","event","context","canExecute","elements","hints","autoSelect","select","filter","isShown","hover","previousSelection","shape","get","id","isSelected","selectedShape","element","getRootElement","isMultiSelect","length","add","deselect","$inject","hidden"],"sources":["C:/Users/sam/final/camunda-react/node_modules/diagram-js/lib/features/selection/SelectionBehavior.js"],"sourcesContent":["import {\r\n  hasPrimaryModifier,\r\n  hasSecondaryModifier,\r\n  isPrimaryButton\r\n} from '../../util/Mouse';\r\n\r\nimport {\r\n  find,\r\n  isArray\r\n} from 'min-dash';\r\n\r\n\r\nexport default function SelectionBehavior(eventBus, selection, canvas, elementRegistry) {\r\n\r\n  // Select elements on create\r\n  eventBus.on('create.end', 500, function(event) {\r\n    var context = event.context,\r\n        canExecute = context.canExecute,\r\n        elements = context.elements,\r\n        hints = context.hints || {},\r\n        autoSelect = hints.autoSelect;\r\n\r\n    if (canExecute) {\r\n      if (autoSelect === false) {\r\n\r\n        // Select no elements\r\n        return;\r\n      }\r\n\r\n      if (isArray(autoSelect)) {\r\n        selection.select(autoSelect);\r\n      } else {\r\n\r\n        // Select all elements by default\r\n        selection.select(elements.filter(isShown));\r\n      }\r\n    }\r\n  });\r\n\r\n  // Select connection targets on connect\r\n  eventBus.on('connect.end', 500, function(event) {\r\n    var context = event.context,\r\n        canExecute = context.canExecute,\r\n        hover = context.hover;\r\n\r\n    if (canExecute && hover) {\r\n      selection.select(hover);\r\n    }\r\n  });\r\n\r\n  // Select shapes on move\r\n  eventBus.on('shape.move.end', 500, function(event) {\r\n    var previousSelection = event.previousSelection || [];\r\n\r\n    var shape = elementRegistry.get(event.context.shape.id);\r\n\r\n    // Always select main shape on move\r\n    var isSelected = find(previousSelection, function(selectedShape) {\r\n      return shape.id === selectedShape.id;\r\n    });\r\n\r\n    if (!isSelected) {\r\n      selection.select(shape);\r\n    }\r\n  });\r\n\r\n  // Select elements on click\r\n  eventBus.on('element.click', function(event) {\r\n\r\n    if (!isPrimaryButton(event)) {\r\n      return;\r\n    }\r\n\r\n    var element = event.element;\r\n\r\n    if (element === canvas.getRootElement()) {\r\n      element = null;\r\n    }\r\n\r\n    var isSelected = selection.isSelected(element),\r\n        isMultiSelect = selection.get().length > 1;\r\n\r\n    // Add to selection if CTRL or SHIFT pressed\r\n    var add = hasPrimaryModifier(event) || hasSecondaryModifier(event);\r\n\r\n    if (isSelected && isMultiSelect) {\r\n      if (add) {\r\n\r\n        // Deselect element\r\n        return selection.deselect(element);\r\n      } else {\r\n\r\n        // Select element only\r\n        return selection.select(element);\r\n      }\r\n    } else if (!isSelected) {\r\n\r\n      // Select element\r\n      selection.select(element, add);\r\n    } else {\r\n\r\n      // Deselect element\r\n      selection.deselect(element);\r\n    }\r\n  });\r\n}\r\n\r\nSelectionBehavior.$inject = [\r\n  'eventBus',\r\n  'selection',\r\n  'canvas',\r\n  'elementRegistry'\r\n];\r\n\r\n\r\nfunction isShown(element) {\r\n  return !element.hidden;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}