{"ast":null,"code":"import { set as cursorSet, unset as cursorUnset } from '../../util/Cursor';\nimport { install as installClickTrap } from '../../util/ClickTrap';\nimport { delta as deltaPos } from '../../util/PositionUtil';\nimport { event as domEvent, closest as domClosest } from 'min-dom';\nimport { toPoint } from '../../util/Event';\nvar THRESHOLD = 15;\n\n/**\r\n * Move the canvas via mouse.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Canvas} canvas\r\n */\nexport default function MoveCanvas(eventBus, canvas) {\n  var context;\n\n  // listen for move on element mouse down;\n  // allow others to hook into the event before us though\n  // (dragging / element moving will do this)\n  eventBus.on('element.mousedown', 500, function (e) {\n    return handleStart(e.originalEvent);\n  });\n  function handleMove(event) {\n    var start = context.start,\n      button = context.button,\n      position = toPoint(event),\n      delta = deltaPos(position, start);\n    if (!context.dragging && length(delta) > THRESHOLD) {\n      context.dragging = true;\n      if (button === 0) {\n        installClickTrap(eventBus);\n      }\n      cursorSet('grab');\n    }\n    if (context.dragging) {\n      var lastPosition = context.last || context.start;\n      delta = deltaPos(position, lastPosition);\n      canvas.scroll({\n        dx: delta.x,\n        dy: delta.y\n      });\n      context.last = position;\n    }\n\n    // prevent select\n    event.preventDefault();\n  }\n  function handleEnd(event) {\n    domEvent.unbind(document, 'mousemove', handleMove);\n    domEvent.unbind(document, 'mouseup', handleEnd);\n    context = null;\n    cursorUnset();\n  }\n  function handleStart(event) {\n    // event is already handled by '.djs-draggable'\n    if (domClosest(event.target, '.djs-draggable')) {\n      return;\n    }\n    var button = event.button;\n\n    // reject right mouse button or modifier key\n    if (button >= 2 || event.ctrlKey || event.shiftKey || event.altKey) {\n      return;\n    }\n    context = {\n      button: button,\n      start: toPoint(event)\n    };\n    domEvent.bind(document, 'mousemove', handleMove);\n    domEvent.bind(document, 'mouseup', handleEnd);\n\n    // we've handled the event\n    return true;\n  }\n  this.isActive = function () {\n    return !!context;\n  };\n}\nMoveCanvas.$inject = ['eventBus', 'canvas'];\n\n// helpers ///////\n\nfunction length(point) {\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}","map":{"version":3,"names":["set","cursorSet","unset","cursorUnset","install","installClickTrap","delta","deltaPos","event","domEvent","closest","domClosest","toPoint","THRESHOLD","MoveCanvas","eventBus","canvas","context","on","e","handleStart","originalEvent","handleMove","start","button","position","dragging","length","lastPosition","last","scroll","dx","x","dy","y","preventDefault","handleEnd","unbind","document","target","ctrlKey","shiftKey","altKey","bind","isActive","$inject","point","Math","sqrt","pow"],"sources":["C:/Users/sam/final/camunda-react/node_modules/diagram-js/lib/navigation/movecanvas/MoveCanvas.js"],"sourcesContent":["import {\r\n  set as cursorSet,\r\n  unset as cursorUnset\r\n} from '../../util/Cursor';\r\n\r\nimport {\r\n  install as installClickTrap\r\n} from '../../util/ClickTrap';\r\n\r\nimport {\r\n  delta as deltaPos\r\n} from '../../util/PositionUtil';\r\n\r\nimport {\r\n  event as domEvent,\r\n  closest as domClosest\r\n} from 'min-dom';\r\n\r\nimport {\r\n  toPoint\r\n} from '../../util/Event';\r\n\r\n\r\nvar THRESHOLD = 15;\r\n\r\n\r\n/**\r\n * Move the canvas via mouse.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Canvas} canvas\r\n */\r\nexport default function MoveCanvas(eventBus, canvas) {\r\n\r\n  var context;\r\n\r\n\r\n  // listen for move on element mouse down;\r\n  // allow others to hook into the event before us though\r\n  // (dragging / element moving will do this)\r\n  eventBus.on('element.mousedown', 500, function(e) {\r\n    return handleStart(e.originalEvent);\r\n  });\r\n\r\n\r\n  function handleMove(event) {\r\n\r\n    var start = context.start,\r\n        button = context.button,\r\n        position = toPoint(event),\r\n        delta = deltaPos(position, start);\r\n\r\n    if (!context.dragging && length(delta) > THRESHOLD) {\r\n      context.dragging = true;\r\n\r\n      if (button === 0) {\r\n        installClickTrap(eventBus);\r\n      }\r\n\r\n      cursorSet('grab');\r\n    }\r\n\r\n    if (context.dragging) {\r\n\r\n      var lastPosition = context.last || context.start;\r\n\r\n      delta = deltaPos(position, lastPosition);\r\n\r\n      canvas.scroll({\r\n        dx: delta.x,\r\n        dy: delta.y\r\n      });\r\n\r\n      context.last = position;\r\n    }\r\n\r\n    // prevent select\r\n    event.preventDefault();\r\n  }\r\n\r\n\r\n  function handleEnd(event) {\r\n    domEvent.unbind(document, 'mousemove', handleMove);\r\n    domEvent.unbind(document, 'mouseup', handleEnd);\r\n\r\n    context = null;\r\n\r\n    cursorUnset();\r\n  }\r\n\r\n  function handleStart(event) {\r\n\r\n    // event is already handled by '.djs-draggable'\r\n    if (domClosest(event.target, '.djs-draggable')) {\r\n      return;\r\n    }\r\n\r\n    var button = event.button;\r\n\r\n    // reject right mouse button or modifier key\r\n    if (button >= 2 || event.ctrlKey || event.shiftKey || event.altKey) {\r\n      return;\r\n    }\r\n\r\n    context = {\r\n      button: button,\r\n      start: toPoint(event)\r\n    };\r\n\r\n    domEvent.bind(document, 'mousemove', handleMove);\r\n    domEvent.bind(document, 'mouseup', handleEnd);\r\n\r\n    // we've handled the event\r\n    return true;\r\n  }\r\n\r\n  this.isActive = function() {\r\n    return !!context;\r\n  };\r\n\r\n}\r\n\r\n\r\nMoveCanvas.$inject = [\r\n  'eventBus',\r\n  'canvas'\r\n];\r\n\r\n\r\n\r\n// helpers ///////\r\n\r\nfunction length(point) {\r\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}