{"ast":null,"code":"import _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _get2 from 'babel-runtime/helpers/get';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _isEmpty from 'lodash/isEmpty';\nimport _partialRight from 'lodash/partialRight';\nimport _inRange from 'lodash/inRange';\nimport _map from 'lodash/map';\nimport _get from 'lodash/get';\nimport _reduce from 'lodash/reduce';\nimport _invoke from 'lodash/invoke';\nimport _without from 'lodash/without';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { AutoControlledComponent as Component, customPropTypes, eventStack, getElementType, getUnhandledProps, htmlInputAttrs, isBrowser, keyboardKey, META, objectDiff, partitionHTMLProps, shallowEqual, SUI, useKeyOnly, useValueAndKey } from '../../lib';\nimport Input from '../../elements/Input';\nimport SearchCategory from './SearchCategory';\nimport SearchResult from './SearchResult';\nimport SearchResults from './SearchResults';\n\n/**\r\n * A search module allows a user to query for results from a selection of data\r\n */\nvar Search = function (_Component) {\n  _inherits(Search, _Component);\n  function Search() {\n    var _ref;\n    var _temp, _this, _ret;\n    _classCallCheck(this, Search);\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Search.__proto__ || Object.getPrototypeOf(Search)).call.apply(_ref, [this].concat(args))), _this), _this.handleResultSelect = function (e, result) {\n      _invoke(_this.props, 'onResultSelect', e, _extends({}, _this.props, {\n        result: result\n      }));\n    }, _this.handleSelectionChange = function (e) {\n      var result = _this.getSelectedResult();\n      _invoke(_this.props, 'onSelectionChange', e, _extends({}, _this.props, {\n        result: result\n      }));\n    }, _this.closeOnEscape = function (e) {\n      if (keyboardKey.getCode(e) !== keyboardKey.Escape) return;\n      e.preventDefault();\n      _this.close();\n    }, _this.moveSelectionOnKeyDown = function (e) {\n      switch (keyboardKey.getCode(e)) {\n        case keyboardKey.ArrowDown:\n          e.preventDefault();\n          _this.moveSelectionBy(e, 1);\n          break;\n        case keyboardKey.ArrowUp:\n          e.preventDefault();\n          _this.moveSelectionBy(e, -1);\n          break;\n        default:\n          break;\n      }\n    }, _this.selectItemOnEnter = function (e) {\n      if (keyboardKey.getCode(e) !== keyboardKey.Enter) return;\n      var result = _this.getSelectedResult();\n\n      // prevent selecting null if there was no selected item value\n      if (!result) return;\n      e.preventDefault();\n\n      // notify the onResultSelect prop that the user is trying to change value\n      _this.setValue(result.title);\n      _this.handleResultSelect(e, result);\n      _this.close();\n    }, _this.closeOnDocumentClick = function (e) {\n      _this.close();\n    }, _this.handleMouseDown = function (e) {\n      _this.isMouseDown = true;\n      _invoke(_this.props, 'onMouseDown', e, _this.props);\n      eventStack.sub('mouseup', _this.handleDocumentMouseUp);\n    }, _this.handleDocumentMouseUp = function () {\n      _this.isMouseDown = false;\n      eventStack.unsub('mouseup', _this.handleDocumentMouseUp);\n    }, _this.handleInputClick = function (e) {\n      // prevent closeOnDocumentClick()\n      e.nativeEvent.stopImmediatePropagation();\n      _this.tryOpen();\n    }, _this.handleItemClick = function (e, _ref2) {\n      var id = _ref2.id;\n      var result = _this.getSelectedResult(id);\n\n      // prevent closeOnDocumentClick()\n      e.nativeEvent.stopImmediatePropagation();\n\n      // notify the onResultSelect prop that the user is trying to change value\n      _this.setValue(result.title);\n      _this.handleResultSelect(e, result);\n      _this.close();\n    }, _this.handleFocus = function (e) {\n      var onFocus = _this.props.onFocus;\n      if (onFocus) onFocus(e, _this.props);\n      _this.setState({\n        focus: true\n      });\n    }, _this.handleBlur = function (e) {\n      var onBlur = _this.props.onBlur;\n      if (onBlur) onBlur(e, _this.props);\n      _this.setState({\n        focus: false\n      });\n    }, _this.handleSearchChange = function (e) {\n      // prevent propagating to this.props.onChange()\n      e.stopPropagation();\n      var minCharacters = _this.props.minCharacters;\n      var open = _this.state.open;\n      var newQuery = e.target.value;\n      _invoke(_this.props, 'onSearchChange', e, _extends({}, _this.props, {\n        value: newQuery\n      }));\n\n      // open search dropdown on search query\n      if (newQuery.length < minCharacters) {\n        _this.close();\n      } else if (!open) {\n        _this.tryOpen(newQuery);\n      }\n      _this.setValue(newQuery);\n    }, _this.getFlattenedResults = function () {\n      var _this$props = _this.props,\n        category = _this$props.category,\n        results = _this$props.results;\n      return !category ? results : _reduce(results, function (memo, categoryData) {\n        return memo.concat(categoryData.results);\n      }, []);\n    }, _this.getSelectedResult = function () {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.selectedIndex;\n      var results = _this.getFlattenedResults();\n      return _get(results, index);\n    }, _this.setValue = function (value) {\n      var selectFirstResult = _this.props.selectFirstResult;\n      _this.trySetState({\n        value: value\n      }, {\n        selectedIndex: selectFirstResult ? 0 : -1\n      });\n    }, _this.moveSelectionBy = function (e, offset) {\n      var selectedIndex = _this.state.selectedIndex;\n      var results = _this.getFlattenedResults();\n      var lastIndex = results.length - 1;\n\n      // next is after last, wrap to beginning\n      // next is before first, wrap to end\n      var nextIndex = selectedIndex + offset;\n      if (nextIndex > lastIndex) nextIndex = 0;else if (nextIndex < 0) nextIndex = lastIndex;\n      _this.setState({\n        selectedIndex: nextIndex\n      });\n      _this.scrollSelectedItemIntoView();\n      _this.handleSelectionChange(e);\n    }, _this.scrollSelectedItemIntoView = function () {\n      // Do not access document when server side rendering\n      if (!isBrowser()) return;\n      var menu = document.querySelector('.ui.search.active.visible .results.visible');\n      var item = menu.querySelector('.result.active');\n      if (!item) return;\n      var isOutOfUpperView = item.offsetTop < menu.scrollTop;\n      var isOutOfLowerView = item.offsetTop + item.clientHeight > menu.scrollTop + menu.clientHeight;\n      if (isOutOfUpperView) {\n        menu.scrollTop = item.offsetTop;\n      } else if (isOutOfLowerView) {\n        menu.scrollTop = item.offsetTop + item.clientHeight - menu.clientHeight;\n      }\n    }, _this.tryOpen = function () {\n      var currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.value;\n      var minCharacters = _this.props.minCharacters;\n      if (currentValue.length < minCharacters) return;\n      _this.open();\n    }, _this.open = function () {\n      _this.trySetState({\n        open: true\n      });\n    }, _this.close = function () {\n      _this.trySetState({\n        open: false\n      });\n    }, _this.renderSearchInput = function (rest) {\n      var _this$props2 = _this.props,\n        icon = _this$props2.icon,\n        input = _this$props2.input;\n      var value = _this.state.value;\n      return Input.create(input, {\n        defaultProps: _extends({}, rest, {\n          icon: icon,\n          input: {\n            className: 'prompt',\n            tabIndex: '0',\n            autoComplete: 'off'\n          },\n          onChange: _this.handleSearchChange,\n          onClick: _this.handleInputClick,\n          value: value\n        })\n      });\n    }, _this.renderNoResults = function () {\n      var _this$props3 = _this.props,\n        noResultsDescription = _this$props3.noResultsDescription,\n        noResultsMessage = _this$props3.noResultsMessage;\n      return React.createElement('div', {\n        className: 'message empty'\n      }, React.createElement('div', {\n        className: 'header'\n      }, noResultsMessage), noResultsDescription && React.createElement('div', {\n        className: 'description'\n      }, noResultsDescription));\n    }, _this.renderResult = function (_ref3, index, _array) {\n      var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var childKey = _ref3.childKey,\n        result = _objectWithoutProperties(_ref3, ['childKey']);\n      var resultRenderer = _this.props.resultRenderer;\n      var selectedIndex = _this.state.selectedIndex;\n      var offsetIndex = index + offset;\n      return React.createElement(SearchResult, _extends({\n        key: childKey || result.title,\n        active: selectedIndex === offsetIndex,\n        onClick: _this.handleItemClick,\n        renderer: resultRenderer\n      }, result, {\n        id: offsetIndex // Used to lookup the result on item click\n      }));\n    }, _this.renderResults = function () {\n      var results = _this.props.results;\n      return _map(results, _this.renderResult);\n    }, _this.renderCategories = function () {\n      var _this$props4 = _this.props,\n        categoryRenderer = _this$props4.categoryRenderer,\n        categories = _this$props4.results;\n      var selectedIndex = _this.state.selectedIndex;\n      var count = 0;\n      return _map(categories, function (_ref4) {\n        var childKey = _ref4.childKey,\n          category = _objectWithoutProperties(_ref4, ['childKey']);\n        var categoryProps = _extends({\n          key: childKey || category.name,\n          active: _inRange(selectedIndex, count, count + category.results.length),\n          renderer: categoryRenderer\n        }, category);\n        var renderFn = _partialRight(_this.renderResult, count);\n        count += category.results.length;\n        return React.createElement(SearchCategory, categoryProps, category.results.map(renderFn));\n      });\n    }, _this.renderMenuContent = function () {\n      var _this$props5 = _this.props,\n        category = _this$props5.category,\n        showNoResults = _this$props5.showNoResults,\n        results = _this$props5.results;\n      if (_isEmpty(results)) {\n        return showNoResults ? _this.renderNoResults() : null;\n      }\n      return category ? _this.renderCategories() : _this.renderResults();\n    }, _this.renderResultsMenu = function () {\n      var open = _this.state.open;\n      var resultsClasses = open ? 'visible' : '';\n      var menuContent = _this.renderMenuContent();\n      if (!menuContent) return;\n      return React.createElement(SearchResults, {\n        className: resultsClasses\n      }, menuContent);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  _createClass(Search, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      var _state = this.state,\n        open = _state.open,\n        value = _state.value;\n      this.setValue(value);\n      if (open) this.open();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      _get2(Search.prototype.__proto__ || Object.getPrototypeOf(Search.prototype), 'componentWillReceiveProps', this).call(this, nextProps);\n      if (!shallowEqual(nextProps.value, this.props.value)) {\n        this.setValue(nextProps.value);\n      }\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return !shallowEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      // focused / blurred\n      // eslint-disable-line complexity\n      if (!prevState.focus && this.state.focus) {\n        if (!this.isMouseDown) {\n          this.tryOpen();\n        }\n        if (this.state.open) {\n          eventStack.sub('keydown', [this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\n        }\n      } else if (prevState.focus && !this.state.focus) {\n        if (!this.isMouseDown) {\n          this.close();\n        }\n        eventStack.unsub('keydown', [this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\n      }\n\n      // opened / closed\n      if (!prevState.open && this.state.open) {\n        this.open();\n        eventStack.sub('click', this.closeOnDocumentClick);\n        eventStack.sub('keydown', [this.closeOnEscape, this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\n      } else if (prevState.open && !this.state.open) {\n        this.close();\n        eventStack.unsub('click', this.closeOnDocumentClick);\n        eventStack.unsub('keydown', [this.closeOnEscape, this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      eventStack.unsub('click', this.closeOnDocumentClick);\n      eventStack.unsub('keydown', [this.closeOnEscape, this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\n    }\n\n    // ----------------------------------------\n    // Document Event Handlers\n    // ----------------------------------------\n\n    // ----------------------------------------\n    // Component Event Handlers\n    // ----------------------------------------\n\n    // ----------------------------------------\n    // Getters\n    // ----------------------------------------\n\n    // ----------------------------------------\n    // Setters\n    // ----------------------------------------\n\n    // ----------------------------------------\n    // Behavior\n    // ----------------------------------------\n\n    // Open if the current value is greater than the minCharacters prop\n\n    // ----------------------------------------\n    // Render\n    // ----------------------------------------\n\n    /**\r\n     * Offset is needed for determining the active item for results within a\r\n     * category. Since the index is reset to 0 for each new category, an offset\r\n     * must be passed in.\r\n     */\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state2 = this.state,\n        searchClasses = _state2.searchClasses,\n        focus = _state2.focus,\n        open = _state2.open;\n      var _props = this.props,\n        aligned = _props.aligned,\n        category = _props.category,\n        className = _props.className,\n        fluid = _props.fluid,\n        loading = _props.loading,\n        size = _props.size;\n\n      // Classes\n\n      var classes = cx('ui', open && 'active visible', size, searchClasses, useKeyOnly(category, 'category'), useKeyOnly(focus, 'focus'), useKeyOnly(fluid, 'fluid'), useKeyOnly(loading, 'loading'), useValueAndKey(aligned, 'aligned'), 'search', className);\n      var unhandled = getUnhandledProps(Search, this.props);\n      var ElementType = getElementType(Search, this.props);\n      var _partitionHTMLProps = partitionHTMLProps(unhandled, {\n          htmlProps: htmlInputAttrs\n        }),\n        _partitionHTMLProps2 = _slicedToArray(_partitionHTMLProps, 2),\n        htmlInputProps = _partitionHTMLProps2[0],\n        rest = _partitionHTMLProps2[1];\n      return React.createElement(ElementType, _extends({}, rest, {\n        className: classes,\n        onBlur: this.handleBlur,\n        onFocus: this.handleFocus,\n        onMouseDown: this.handleMouseDown\n      }), this.renderSearchInput(htmlInputProps), this.renderResultsMenu());\n    }\n  }]);\n  return Search;\n}(Component);\nSearch.defaultProps = {\n  icon: 'search',\n  input: 'text',\n  minCharacters: 1,\n  noResultsMessage: 'No results found.',\n  showNoResults: true\n};\nSearch.autoControlledProps = ['open', 'value'];\nSearch._meta = {\n  name: 'Search',\n  type: META.TYPES.MODULE\n};\nSearch.Category = SearchCategory;\nSearch.Result = SearchResult;\nSearch.Results = SearchResults;\nSearch.handledProps = ['aligned', 'as', 'category', 'categoryRenderer', 'className', 'defaultOpen', 'defaultValue', 'fluid', 'icon', 'input', 'loading', 'minCharacters', 'noResultsDescription', 'noResultsMessage', 'onBlur', 'onFocus', 'onMouseDown', 'onResultSelect', 'onSearchChange', 'onSelectionChange', 'open', 'resultRenderer', 'results', 'selectFirstResult', 'showNoResults', 'size', 'value'];\nexport default Search;\nSearch.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: customPropTypes.as,\n  // ------------------------------------\n  // Behavior\n  // ------------------------------------\n\n  /** Initial value of open. */\n  defaultOpen: PropTypes.bool,\n  /** Initial value. */\n  defaultValue: PropTypes.string,\n  /** Shorthand for Icon. */\n  icon: PropTypes.oneOfType([PropTypes.node, PropTypes.object]),\n  /** Minimum characters to query for results */\n  minCharacters: PropTypes.number,\n  /** Additional text for \"No Results\" message with less emphasis. */\n  noResultsDescription: PropTypes.node,\n  /** Message to display when there are no results. */\n  noResultsMessage: PropTypes.node,\n  /** Controls whether or not the results menu is displayed. */\n  open: PropTypes.bool,\n  /**\r\n   * One of:\r\n   * - array of Search.Result props e.g. `{ title: '', description: '' }` or\r\n   * - object of categories e.g. `{ name: '', results: [{ title: '', description: '' }]`\r\n   */\n  results: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.shape(SearchResult.propTypes)), PropTypes.object]),\n  /** Whether the search should automatically select the first result after searching. */\n  selectFirstResult: PropTypes.bool,\n  /** Whether a \"no results\" message should be shown if no results are found. */\n  showNoResults: PropTypes.bool,\n  /** Current value of the search input. Creates a controlled component. */\n  value: PropTypes.string,\n  // ------------------------------------\n  // Rendering\n  // ------------------------------------\n\n  /**\r\n   * Renders the SearchCategory contents.\r\n   *\r\n   * @param {object} props - The SearchCategory props object.\r\n   * @returns {*} - Renderable SearchCategory contents.\r\n   */\n  categoryRenderer: PropTypes.func,\n  /**\r\n   * Renders the SearchResult contents.\r\n   *\r\n   * @param {object} props - The SearchResult props object.\r\n   * @returns {*} - Renderable SearchResult contents.\r\n   */\n  resultRenderer: PropTypes.func,\n  // ------------------------------------\n  // Callbacks\n  // ------------------------------------\n\n  /**\r\n   * Called on blur.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\n  onBlur: PropTypes.func,\n  /**\r\n   * Called on focus.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\n  onFocus: PropTypes.func,\n  /**\r\n   * Called on mousedown.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\n  onMouseDown: PropTypes.func,\n  /**\r\n   * Called when a result is selected.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\n  onResultSelect: PropTypes.func,\n  /**\r\n   * Called on search input change.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props, includes current value of search input.\r\n   */\n  onSearchChange: PropTypes.func,\n  /**\r\n   * Called when the active selection index is changed.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\n  onSelectionChange: PropTypes.func,\n  // ------------------------------------\n  // Style\n  // ------------------------------------\n\n  /** A search can have its results aligned to its left or right container edge. */\n  aligned: PropTypes.string,\n  /** A search can display results from remote content ordered by categories. */\n  category: PropTypes.bool,\n  /** Additional classes. */\n  className: PropTypes.string,\n  /** A search can have its results take up the width of its container. */\n  fluid: PropTypes.bool,\n  /** A search input can take up the width of its container. */\n  input: customPropTypes.itemShorthand,\n  /** A search can show a loading indicator. */\n  loading: PropTypes.bool,\n  /** A search can have different sizes. */\n  size: PropTypes.oneOf(_without(SUI.SIZES, 'medium'))\n} : {};","map":{"version":3,"names":["_slicedToArray","_objectWithoutProperties","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_get2","_inherits","_isEmpty","_partialRight","_inRange","_map","_get","_reduce","_invoke","_without","cx","PropTypes","React","AutoControlledComponent","Component","customPropTypes","eventStack","getElementType","getUnhandledProps","htmlInputAttrs","isBrowser","keyboardKey","META","objectDiff","partitionHTMLProps","shallowEqual","SUI","useKeyOnly","useValueAndKey","Input","SearchCategory","SearchResult","SearchResults","Search","_Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","Object","getPrototypeOf","call","apply","concat","handleResultSelect","e","result","props","handleSelectionChange","getSelectedResult","closeOnEscape","getCode","Escape","preventDefault","close","moveSelectionOnKeyDown","ArrowDown","moveSelectionBy","ArrowUp","selectItemOnEnter","Enter","setValue","title","closeOnDocumentClick","handleMouseDown","isMouseDown","sub","handleDocumentMouseUp","unsub","handleInputClick","nativeEvent","stopImmediatePropagation","tryOpen","handleItemClick","_ref2","id","handleFocus","onFocus","setState","focus","handleBlur","onBlur","handleSearchChange","stopPropagation","minCharacters","open","state","newQuery","target","value","getFlattenedResults","_this$props","category","results","memo","categoryData","index","undefined","selectedIndex","selectFirstResult","trySetState","offset","lastIndex","nextIndex","scrollSelectedItemIntoView","menu","document","querySelector","item","isOutOfUpperView","offsetTop","scrollTop","isOutOfLowerView","clientHeight","currentValue","renderSearchInput","rest","_this$props2","icon","input","create","defaultProps","className","tabIndex","autoComplete","onChange","onClick","renderNoResults","_this$props3","noResultsDescription","noResultsMessage","createElement","renderResult","_ref3","_array","childKey","resultRenderer","offsetIndex","key","active","renderer","renderResults","renderCategories","_this$props4","categoryRenderer","categories","count","_ref4","categoryProps","name","renderFn","map","renderMenuContent","_this$props5","showNoResults","renderResultsMenu","resultsClasses","menuContent","componentWillMount","_state","componentWillReceiveProps","nextProps","prototype","shouldComponentUpdate","nextState","componentDidUpdate","prevProps","prevState","componentWillUnmount","render","_state2","searchClasses","_props","aligned","fluid","loading","size","classes","unhandled","ElementType","_partitionHTMLProps","htmlProps","_partitionHTMLProps2","htmlInputProps","onMouseDown","autoControlledProps","_meta","type","TYPES","MODULE","Category","Result","Results","handledProps","propTypes","process","env","NODE_ENV","as","defaultOpen","bool","defaultValue","string","oneOfType","node","object","number","arrayOf","shape","func","onResultSelect","onSearchChange","onSelectionChange","itemShorthand","oneOf","SIZES"],"sources":["C:/Users/sam/final/camunda-react/node_modules/react-semantic-redux-form/node_modules/semantic-ui-react/dist/es/modules/Search/Search.js"],"sourcesContent":["import _slicedToArray from 'babel-runtime/helpers/slicedToArray';\r\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\r\nimport _extends from 'babel-runtime/helpers/extends';\r\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\r\nimport _createClass from 'babel-runtime/helpers/createClass';\r\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\r\nimport _get2 from 'babel-runtime/helpers/get';\r\nimport _inherits from 'babel-runtime/helpers/inherits';\r\nimport _isEmpty from 'lodash/isEmpty';\r\nimport _partialRight from 'lodash/partialRight';\r\nimport _inRange from 'lodash/inRange';\r\nimport _map from 'lodash/map';\r\nimport _get from 'lodash/get';\r\nimport _reduce from 'lodash/reduce';\r\nimport _invoke from 'lodash/invoke';\r\nimport _without from 'lodash/without';\r\nimport cx from 'classnames';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nimport { AutoControlledComponent as Component, customPropTypes, eventStack, getElementType, getUnhandledProps, htmlInputAttrs, isBrowser, keyboardKey, META, objectDiff, partitionHTMLProps, shallowEqual, SUI, useKeyOnly, useValueAndKey } from '../../lib';\r\nimport Input from '../../elements/Input';\r\nimport SearchCategory from './SearchCategory';\r\nimport SearchResult from './SearchResult';\r\nimport SearchResults from './SearchResults';\r\n\r\n/**\r\n * A search module allows a user to query for results from a selection of data\r\n */\r\nvar Search = function (_Component) {\r\n  _inherits(Search, _Component);\r\n\r\n  function Search() {\r\n    var _ref;\r\n\r\n    var _temp, _this, _ret;\r\n\r\n    _classCallCheck(this, Search);\r\n\r\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n      args[_key] = arguments[_key];\r\n    }\r\n\r\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Search.__proto__ || Object.getPrototypeOf(Search)).call.apply(_ref, [this].concat(args))), _this), _this.handleResultSelect = function (e, result) {\r\n\r\n      _invoke(_this.props, 'onResultSelect', e, _extends({}, _this.props, { result: result }));\r\n    }, _this.handleSelectionChange = function (e) {\r\n\r\n      var result = _this.getSelectedResult();\r\n      _invoke(_this.props, 'onSelectionChange', e, _extends({}, _this.props, { result: result }));\r\n    }, _this.closeOnEscape = function (e) {\r\n      if (keyboardKey.getCode(e) !== keyboardKey.Escape) return;\r\n      e.preventDefault();\r\n      _this.close();\r\n    }, _this.moveSelectionOnKeyDown = function (e) {\r\n      switch (keyboardKey.getCode(e)) {\r\n        case keyboardKey.ArrowDown:\r\n          e.preventDefault();\r\n          _this.moveSelectionBy(e, 1);\r\n          break;\r\n        case keyboardKey.ArrowUp:\r\n          e.preventDefault();\r\n          _this.moveSelectionBy(e, -1);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }, _this.selectItemOnEnter = function (e) {\r\n      if (keyboardKey.getCode(e) !== keyboardKey.Enter) return;\r\n\r\n      var result = _this.getSelectedResult();\r\n\r\n      // prevent selecting null if there was no selected item value\r\n      if (!result) return;\r\n\r\n      e.preventDefault();\r\n\r\n      // notify the onResultSelect prop that the user is trying to change value\r\n      _this.setValue(result.title);\r\n      _this.handleResultSelect(e, result);\r\n      _this.close();\r\n    }, _this.closeOnDocumentClick = function (e) {\r\n      _this.close();\r\n    }, _this.handleMouseDown = function (e) {\r\n\r\n      _this.isMouseDown = true;\r\n      _invoke(_this.props, 'onMouseDown', e, _this.props);\r\n      eventStack.sub('mouseup', _this.handleDocumentMouseUp);\r\n    }, _this.handleDocumentMouseUp = function () {\r\n\r\n      _this.isMouseDown = false;\r\n      eventStack.unsub('mouseup', _this.handleDocumentMouseUp);\r\n    }, _this.handleInputClick = function (e) {\r\n\r\n      // prevent closeOnDocumentClick()\r\n      e.nativeEvent.stopImmediatePropagation();\r\n\r\n      _this.tryOpen();\r\n    }, _this.handleItemClick = function (e, _ref2) {\r\n      var id = _ref2.id;\r\n\r\n      var result = _this.getSelectedResult(id);\r\n\r\n      // prevent closeOnDocumentClick()\r\n      e.nativeEvent.stopImmediatePropagation();\r\n\r\n      // notify the onResultSelect prop that the user is trying to change value\r\n      _this.setValue(result.title);\r\n      _this.handleResultSelect(e, result);\r\n      _this.close();\r\n    }, _this.handleFocus = function (e) {\r\n      var onFocus = _this.props.onFocus;\r\n\r\n      if (onFocus) onFocus(e, _this.props);\r\n      _this.setState({ focus: true });\r\n    }, _this.handleBlur = function (e) {\r\n      var onBlur = _this.props.onBlur;\r\n\r\n      if (onBlur) onBlur(e, _this.props);\r\n      _this.setState({ focus: false });\r\n    }, _this.handleSearchChange = function (e) {\r\n      // prevent propagating to this.props.onChange()\r\n      e.stopPropagation();\r\n      var minCharacters = _this.props.minCharacters;\r\n      var open = _this.state.open;\r\n\r\n      var newQuery = e.target.value;\r\n\r\n      _invoke(_this.props, 'onSearchChange', e, _extends({}, _this.props, { value: newQuery }));\r\n\r\n      // open search dropdown on search query\r\n      if (newQuery.length < minCharacters) {\r\n        _this.close();\r\n      } else if (!open) {\r\n        _this.tryOpen(newQuery);\r\n      }\r\n\r\n      _this.setValue(newQuery);\r\n    }, _this.getFlattenedResults = function () {\r\n      var _this$props = _this.props,\r\n          category = _this$props.category,\r\n          results = _this$props.results;\r\n\r\n\r\n      return !category ? results : _reduce(results, function (memo, categoryData) {\r\n        return memo.concat(categoryData.results);\r\n      }, []);\r\n    }, _this.getSelectedResult = function () {\r\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.selectedIndex;\r\n\r\n      var results = _this.getFlattenedResults();\r\n      return _get(results, index);\r\n    }, _this.setValue = function (value) {\r\n      var selectFirstResult = _this.props.selectFirstResult;\r\n\r\n\r\n      _this.trySetState({ value: value }, { selectedIndex: selectFirstResult ? 0 : -1 });\r\n    }, _this.moveSelectionBy = function (e, offset) {\r\n      var selectedIndex = _this.state.selectedIndex;\r\n\r\n\r\n      var results = _this.getFlattenedResults();\r\n      var lastIndex = results.length - 1;\r\n\r\n      // next is after last, wrap to beginning\r\n      // next is before first, wrap to end\r\n      var nextIndex = selectedIndex + offset;\r\n      if (nextIndex > lastIndex) nextIndex = 0;else if (nextIndex < 0) nextIndex = lastIndex;\r\n\r\n      _this.setState({ selectedIndex: nextIndex });\r\n      _this.scrollSelectedItemIntoView();\r\n      _this.handleSelectionChange(e);\r\n    }, _this.scrollSelectedItemIntoView = function () {\r\n      // Do not access document when server side rendering\r\n      if (!isBrowser()) return;\r\n      var menu = document.querySelector('.ui.search.active.visible .results.visible');\r\n      var item = menu.querySelector('.result.active');\r\n      if (!item) return;\r\n\r\n      var isOutOfUpperView = item.offsetTop < menu.scrollTop;\r\n      var isOutOfLowerView = item.offsetTop + item.clientHeight > menu.scrollTop + menu.clientHeight;\r\n\r\n      if (isOutOfUpperView) {\r\n        menu.scrollTop = item.offsetTop;\r\n      } else if (isOutOfLowerView) {\r\n        menu.scrollTop = item.offsetTop + item.clientHeight - menu.clientHeight;\r\n      }\r\n    }, _this.tryOpen = function () {\r\n      var currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.value;\r\n      var minCharacters = _this.props.minCharacters;\r\n\r\n      if (currentValue.length < minCharacters) return;\r\n\r\n      _this.open();\r\n    }, _this.open = function () {\r\n      _this.trySetState({ open: true });\r\n    }, _this.close = function () {\r\n      _this.trySetState({ open: false });\r\n    }, _this.renderSearchInput = function (rest) {\r\n      var _this$props2 = _this.props,\r\n          icon = _this$props2.icon,\r\n          input = _this$props2.input;\r\n      var value = _this.state.value;\r\n\r\n\r\n      return Input.create(input, { defaultProps: _extends({}, rest, {\r\n          icon: icon,\r\n          input: { className: 'prompt', tabIndex: '0', autoComplete: 'off' },\r\n          onChange: _this.handleSearchChange,\r\n          onClick: _this.handleInputClick,\r\n          value: value\r\n        }) });\r\n    }, _this.renderNoResults = function () {\r\n      var _this$props3 = _this.props,\r\n          noResultsDescription = _this$props3.noResultsDescription,\r\n          noResultsMessage = _this$props3.noResultsMessage;\r\n\r\n\r\n      return React.createElement(\r\n        'div',\r\n        { className: 'message empty' },\r\n        React.createElement(\r\n          'div',\r\n          { className: 'header' },\r\n          noResultsMessage\r\n        ),\r\n        noResultsDescription && React.createElement(\r\n          'div',\r\n          { className: 'description' },\r\n          noResultsDescription\r\n        )\r\n      );\r\n    }, _this.renderResult = function (_ref3, index, _array) {\r\n      var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\r\n\r\n      var childKey = _ref3.childKey,\r\n          result = _objectWithoutProperties(_ref3, ['childKey']);\r\n\r\n      var resultRenderer = _this.props.resultRenderer;\r\n      var selectedIndex = _this.state.selectedIndex;\r\n\r\n      var offsetIndex = index + offset;\r\n\r\n      return React.createElement(SearchResult, _extends({\r\n        key: childKey || result.title,\r\n        active: selectedIndex === offsetIndex,\r\n        onClick: _this.handleItemClick,\r\n        renderer: resultRenderer\r\n      }, result, {\r\n        id: offsetIndex // Used to lookup the result on item click\r\n      }));\r\n    }, _this.renderResults = function () {\r\n      var results = _this.props.results;\r\n\r\n\r\n      return _map(results, _this.renderResult);\r\n    }, _this.renderCategories = function () {\r\n      var _this$props4 = _this.props,\r\n          categoryRenderer = _this$props4.categoryRenderer,\r\n          categories = _this$props4.results;\r\n      var selectedIndex = _this.state.selectedIndex;\r\n\r\n\r\n      var count = 0;\r\n\r\n      return _map(categories, function (_ref4) {\r\n        var childKey = _ref4.childKey,\r\n            category = _objectWithoutProperties(_ref4, ['childKey']);\r\n\r\n        var categoryProps = _extends({\r\n          key: childKey || category.name,\r\n          active: _inRange(selectedIndex, count, count + category.results.length),\r\n          renderer: categoryRenderer\r\n        }, category);\r\n        var renderFn = _partialRight(_this.renderResult, count);\r\n\r\n        count += category.results.length;\r\n\r\n        return React.createElement(\r\n          SearchCategory,\r\n          categoryProps,\r\n          category.results.map(renderFn)\r\n        );\r\n      });\r\n    }, _this.renderMenuContent = function () {\r\n      var _this$props5 = _this.props,\r\n          category = _this$props5.category,\r\n          showNoResults = _this$props5.showNoResults,\r\n          results = _this$props5.results;\r\n\r\n\r\n      if (_isEmpty(results)) {\r\n        return showNoResults ? _this.renderNoResults() : null;\r\n      }\r\n\r\n      return category ? _this.renderCategories() : _this.renderResults();\r\n    }, _this.renderResultsMenu = function () {\r\n      var open = _this.state.open;\r\n\r\n      var resultsClasses = open ? 'visible' : '';\r\n      var menuContent = _this.renderMenuContent();\r\n\r\n      if (!menuContent) return;\r\n\r\n      return React.createElement(\r\n        SearchResults,\r\n        { className: resultsClasses },\r\n        menuContent\r\n      );\r\n    }, _temp), _possibleConstructorReturn(_this, _ret);\r\n  }\r\n\r\n  _createClass(Search, [{\r\n    key: 'componentWillMount',\r\n    value: function componentWillMount() {\r\n      var _state = this.state,\r\n          open = _state.open,\r\n          value = _state.value;\r\n\r\n\r\n      this.setValue(value);\r\n      if (open) this.open();\r\n    }\r\n  }, {\r\n    key: 'componentWillReceiveProps',\r\n    value: function componentWillReceiveProps(nextProps) {\r\n      _get2(Search.prototype.__proto__ || Object.getPrototypeOf(Search.prototype), 'componentWillReceiveProps', this).call(this, nextProps);\r\n\r\n\r\n      if (!shallowEqual(nextProps.value, this.props.value)) {\r\n        this.setValue(nextProps.value);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'shouldComponentUpdate',\r\n    value: function shouldComponentUpdate(nextProps, nextState) {\r\n      return !shallowEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\r\n    }\r\n  }, {\r\n    key: 'componentDidUpdate',\r\n    value: function componentDidUpdate(prevProps, prevState) {\r\n\r\n      // focused / blurred\r\n      // eslint-disable-line complexity\r\n      if (!prevState.focus && this.state.focus) {\r\n        if (!this.isMouseDown) {\r\n          this.tryOpen();\r\n        }\r\n        if (this.state.open) {\r\n          eventStack.sub('keydown', [this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\r\n        }\r\n      } else if (prevState.focus && !this.state.focus) {\r\n        if (!this.isMouseDown) {\r\n          this.close();\r\n        }\r\n        eventStack.unsub('keydown', [this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\r\n      }\r\n\r\n      // opened / closed\r\n      if (!prevState.open && this.state.open) {\r\n        this.open();\r\n        eventStack.sub('click', this.closeOnDocumentClick);\r\n        eventStack.sub('keydown', [this.closeOnEscape, this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\r\n      } else if (prevState.open && !this.state.open) {\r\n        this.close();\r\n        eventStack.unsub('click', this.closeOnDocumentClick);\r\n        eventStack.unsub('keydown', [this.closeOnEscape, this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'componentWillUnmount',\r\n    value: function componentWillUnmount() {\r\n\r\n      eventStack.unsub('click', this.closeOnDocumentClick);\r\n      eventStack.unsub('keydown', [this.closeOnEscape, this.moveSelectionOnKeyDown, this.selectItemOnEnter]);\r\n    }\r\n\r\n    // ----------------------------------------\r\n    // Document Event Handlers\r\n    // ----------------------------------------\r\n\r\n    // ----------------------------------------\r\n    // Component Event Handlers\r\n    // ----------------------------------------\r\n\r\n    // ----------------------------------------\r\n    // Getters\r\n    // ----------------------------------------\r\n\r\n    // ----------------------------------------\r\n    // Setters\r\n    // ----------------------------------------\r\n\r\n    // ----------------------------------------\r\n    // Behavior\r\n    // ----------------------------------------\r\n\r\n    // Open if the current value is greater than the minCharacters prop\r\n\r\n\r\n    // ----------------------------------------\r\n    // Render\r\n    // ----------------------------------------\r\n\r\n    /**\r\n     * Offset is needed for determining the active item for results within a\r\n     * category. Since the index is reset to 0 for each new category, an offset\r\n     * must be passed in.\r\n     */\r\n\r\n  }, {\r\n    key: 'render',\r\n    value: function render() {\r\n      var _state2 = this.state,\r\n          searchClasses = _state2.searchClasses,\r\n          focus = _state2.focus,\r\n          open = _state2.open;\r\n      var _props = this.props,\r\n          aligned = _props.aligned,\r\n          category = _props.category,\r\n          className = _props.className,\r\n          fluid = _props.fluid,\r\n          loading = _props.loading,\r\n          size = _props.size;\r\n\r\n      // Classes\r\n\r\n      var classes = cx('ui', open && 'active visible', size, searchClasses, useKeyOnly(category, 'category'), useKeyOnly(focus, 'focus'), useKeyOnly(fluid, 'fluid'), useKeyOnly(loading, 'loading'), useValueAndKey(aligned, 'aligned'), 'search', className);\r\n      var unhandled = getUnhandledProps(Search, this.props);\r\n      var ElementType = getElementType(Search, this.props);\r\n\r\n      var _partitionHTMLProps = partitionHTMLProps(unhandled, {\r\n        htmlProps: htmlInputAttrs\r\n      }),\r\n          _partitionHTMLProps2 = _slicedToArray(_partitionHTMLProps, 2),\r\n          htmlInputProps = _partitionHTMLProps2[0],\r\n          rest = _partitionHTMLProps2[1];\r\n\r\n      return React.createElement(\r\n        ElementType,\r\n        _extends({}, rest, {\r\n          className: classes,\r\n          onBlur: this.handleBlur,\r\n          onFocus: this.handleFocus,\r\n          onMouseDown: this.handleMouseDown\r\n        }),\r\n        this.renderSearchInput(htmlInputProps),\r\n        this.renderResultsMenu()\r\n      );\r\n    }\r\n  }]);\r\n\r\n  return Search;\r\n}(Component);\r\n\r\nSearch.defaultProps = {\r\n  icon: 'search',\r\n  input: 'text',\r\n  minCharacters: 1,\r\n  noResultsMessage: 'No results found.',\r\n  showNoResults: true\r\n};\r\nSearch.autoControlledProps = ['open', 'value'];\r\nSearch._meta = {\r\n  name: 'Search',\r\n  type: META.TYPES.MODULE\r\n};\r\nSearch.Category = SearchCategory;\r\nSearch.Result = SearchResult;\r\nSearch.Results = SearchResults;\r\nSearch.handledProps = ['aligned', 'as', 'category', 'categoryRenderer', 'className', 'defaultOpen', 'defaultValue', 'fluid', 'icon', 'input', 'loading', 'minCharacters', 'noResultsDescription', 'noResultsMessage', 'onBlur', 'onFocus', 'onMouseDown', 'onResultSelect', 'onSearchChange', 'onSelectionChange', 'open', 'resultRenderer', 'results', 'selectFirstResult', 'showNoResults', 'size', 'value'];\r\nexport default Search;\r\nSearch.propTypes = process.env.NODE_ENV !== \"production\" ? {\r\n  /** An element type to render as (string or function). */\r\n  as: customPropTypes.as,\r\n\r\n  // ------------------------------------\r\n  // Behavior\r\n  // ------------------------------------\r\n\r\n  /** Initial value of open. */\r\n  defaultOpen: PropTypes.bool,\r\n\r\n  /** Initial value. */\r\n  defaultValue: PropTypes.string,\r\n\r\n  /** Shorthand for Icon. */\r\n  icon: PropTypes.oneOfType([PropTypes.node, PropTypes.object]),\r\n\r\n  /** Minimum characters to query for results */\r\n  minCharacters: PropTypes.number,\r\n\r\n  /** Additional text for \"No Results\" message with less emphasis. */\r\n  noResultsDescription: PropTypes.node,\r\n\r\n  /** Message to display when there are no results. */\r\n  noResultsMessage: PropTypes.node,\r\n\r\n  /** Controls whether or not the results menu is displayed. */\r\n  open: PropTypes.bool,\r\n\r\n  /**\r\n   * One of:\r\n   * - array of Search.Result props e.g. `{ title: '', description: '' }` or\r\n   * - object of categories e.g. `{ name: '', results: [{ title: '', description: '' }]`\r\n   */\r\n  results: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.shape(SearchResult.propTypes)), PropTypes.object]),\r\n\r\n  /** Whether the search should automatically select the first result after searching. */\r\n  selectFirstResult: PropTypes.bool,\r\n\r\n  /** Whether a \"no results\" message should be shown if no results are found. */\r\n  showNoResults: PropTypes.bool,\r\n\r\n  /** Current value of the search input. Creates a controlled component. */\r\n  value: PropTypes.string,\r\n\r\n  // ------------------------------------\r\n  // Rendering\r\n  // ------------------------------------\r\n\r\n  /**\r\n   * Renders the SearchCategory contents.\r\n   *\r\n   * @param {object} props - The SearchCategory props object.\r\n   * @returns {*} - Renderable SearchCategory contents.\r\n   */\r\n  categoryRenderer: PropTypes.func,\r\n\r\n  /**\r\n   * Renders the SearchResult contents.\r\n   *\r\n   * @param {object} props - The SearchResult props object.\r\n   * @returns {*} - Renderable SearchResult contents.\r\n   */\r\n  resultRenderer: PropTypes.func,\r\n\r\n  // ------------------------------------\r\n  // Callbacks\r\n  // ------------------------------------\r\n\r\n  /**\r\n   * Called on blur.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\r\n  onBlur: PropTypes.func,\r\n\r\n  /**\r\n   * Called on focus.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\r\n  onFocus: PropTypes.func,\r\n\r\n  /**\r\n   * Called on mousedown.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\r\n  onMouseDown: PropTypes.func,\r\n\r\n  /**\r\n   * Called when a result is selected.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\r\n  onResultSelect: PropTypes.func,\r\n\r\n  /**\r\n   * Called on search input change.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props, includes current value of search input.\r\n   */\r\n  onSearchChange: PropTypes.func,\r\n\r\n  /**\r\n   * Called when the active selection index is changed.\r\n   *\r\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\r\n   * @param {object} data - All props.\r\n   */\r\n  onSelectionChange: PropTypes.func,\r\n\r\n  // ------------------------------------\r\n  // Style\r\n  // ------------------------------------\r\n\r\n  /** A search can have its results aligned to its left or right container edge. */\r\n  aligned: PropTypes.string,\r\n\r\n  /** A search can display results from remote content ordered by categories. */\r\n  category: PropTypes.bool,\r\n\r\n  /** Additional classes. */\r\n  className: PropTypes.string,\r\n\r\n  /** A search can have its results take up the width of its container. */\r\n  fluid: PropTypes.bool,\r\n\r\n  /** A search input can take up the width of its container. */\r\n  input: customPropTypes.itemShorthand,\r\n\r\n  /** A search can show a loading indicator. */\r\n  loading: PropTypes.bool,\r\n\r\n  /** A search can have different sizes. */\r\n  size: PropTypes.oneOf(_without(SUI.SIZES, 'medium'))\r\n} : {};"],"mappings":"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"},"metadata":{},"sourceType":"module"}