{"ast":null,"code":"import { isArray, forEach } from 'min-dash';\n\n/**\r\n * A service that offers the current selection in a diagram.\r\n * Offers the api to control the selection, too.\r\n *\r\n * @class\r\n *\r\n * @param {EventBus} eventBus the event bus\r\n */\nexport default function Selection(eventBus, canvas) {\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._selectedElements = [];\n  var self = this;\n  eventBus.on(['shape.remove', 'connection.remove'], function (e) {\n    var element = e.element;\n    self.deselect(element);\n  });\n  eventBus.on(['diagram.clear', 'plane.set'], function (e) {\n    self.select(null);\n  });\n}\nSelection.$inject = ['eventBus', 'canvas'];\nSelection.prototype.deselect = function (element) {\n  var selectedElements = this._selectedElements;\n  var idx = selectedElements.indexOf(element);\n  if (idx !== -1) {\n    var oldSelection = selectedElements.slice();\n    selectedElements.splice(idx, 1);\n    this._eventBus.fire('selection.changed', {\n      oldSelection: oldSelection,\n      newSelection: selectedElements\n    });\n  }\n};\nSelection.prototype.get = function () {\n  return this._selectedElements;\n};\nSelection.prototype.isSelected = function (element) {\n  return this._selectedElements.indexOf(element) !== -1;\n};\n\n/**\r\n * This method selects one or more elements on the diagram.\r\n *\r\n * By passing an additional add parameter you can decide whether or not the element(s)\r\n * should be added to the already existing selection or not.\r\n *\r\n * @method Selection#select\r\n *\r\n * @param  {Object|Object[]} elements element or array of elements to be selected\r\n * @param  {boolean} [add] whether the element(s) should be appended to the current selection, defaults to false\r\n */\nSelection.prototype.select = function (elements, add) {\n  var selectedElements = this._selectedElements,\n    oldSelection = selectedElements.slice();\n  if (!isArray(elements)) {\n    elements = elements ? [elements] : [];\n  }\n  var canvas = this._canvas;\n  elements = elements.filter(function (element) {\n    var plane = canvas.findPlane(element);\n    return plane === canvas.getActivePlane();\n  });\n\n  // selection may be cleared by passing an empty array or null\n  // to the method\n  if (add) {\n    forEach(elements, function (element) {\n      if (selectedElements.indexOf(element) !== -1) {\n        // already selected\n        return;\n      } else {\n        selectedElements.push(element);\n      }\n    });\n  } else {\n    this._selectedElements = selectedElements = elements.slice();\n  }\n  this._eventBus.fire('selection.changed', {\n    oldSelection: oldSelection,\n    newSelection: selectedElements\n  });\n};","map":{"version":3,"names":["isArray","forEach","Selection","eventBus","canvas","_eventBus","_canvas","_selectedElements","self","on","e","element","deselect","select","$inject","prototype","selectedElements","idx","indexOf","oldSelection","slice","splice","fire","newSelection","get","isSelected","elements","add","filter","plane","findPlane","getActivePlane","push"],"sources":["C:/Users/sam/final/camunda-react/node_modules/diagram-js/lib/features/selection/Selection.js"],"sourcesContent":["import {\r\n  isArray,\r\n  forEach\r\n} from 'min-dash';\r\n\r\n\r\n/**\r\n * A service that offers the current selection in a diagram.\r\n * Offers the api to control the selection, too.\r\n *\r\n * @class\r\n *\r\n * @param {EventBus} eventBus the event bus\r\n */\r\nexport default function Selection(eventBus, canvas) {\r\n\r\n  this._eventBus = eventBus;\r\n  this._canvas = canvas;\r\n\r\n  this._selectedElements = [];\r\n\r\n  var self = this;\r\n\r\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\r\n    var element = e.element;\r\n    self.deselect(element);\r\n  });\r\n\r\n  eventBus.on([ 'diagram.clear', 'plane.set' ], function(e) {\r\n    self.select(null);\r\n  });\r\n}\r\n\r\nSelection.$inject = [ 'eventBus', 'canvas' ];\r\n\r\n\r\nSelection.prototype.deselect = function(element) {\r\n  var selectedElements = this._selectedElements;\r\n\r\n  var idx = selectedElements.indexOf(element);\r\n\r\n  if (idx !== -1) {\r\n    var oldSelection = selectedElements.slice();\r\n\r\n    selectedElements.splice(idx, 1);\r\n\r\n    this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\r\n  }\r\n};\r\n\r\n\r\nSelection.prototype.get = function() {\r\n  return this._selectedElements;\r\n};\r\n\r\nSelection.prototype.isSelected = function(element) {\r\n  return this._selectedElements.indexOf(element) !== -1;\r\n};\r\n\r\n\r\n/**\r\n * This method selects one or more elements on the diagram.\r\n *\r\n * By passing an additional add parameter you can decide whether or not the element(s)\r\n * should be added to the already existing selection or not.\r\n *\r\n * @method Selection#select\r\n *\r\n * @param  {Object|Object[]} elements element or array of elements to be selected\r\n * @param  {boolean} [add] whether the element(s) should be appended to the current selection, defaults to false\r\n */\r\nSelection.prototype.select = function(elements, add) {\r\n  var selectedElements = this._selectedElements,\r\n      oldSelection = selectedElements.slice();\r\n\r\n  if (!isArray(elements)) {\r\n    elements = elements ? [ elements ] : [];\r\n  }\r\n\r\n  var canvas = this._canvas;\r\n\r\n  elements = elements.filter(function(element) {\r\n    var plane = canvas.findPlane(element);\r\n\r\n    return plane === canvas.getActivePlane();\r\n  });\r\n\r\n  // selection may be cleared by passing an empty array or null\r\n  // to the method\r\n  if (add) {\r\n    forEach(elements, function(element) {\r\n      if (selectedElements.indexOf(element) !== -1) {\r\n\r\n        // already selected\r\n        return;\r\n      } else {\r\n        selectedElements.push(element);\r\n      }\r\n    });\r\n  } else {\r\n    this._selectedElements = selectedElements = elements.slice();\r\n  }\r\n\r\n  this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}