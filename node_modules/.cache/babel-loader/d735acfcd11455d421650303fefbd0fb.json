{"ast":null,"code":"import BpmnTreeWalker from './BpmnTreeWalker';\n\n/**\r\n * The importBpmnDiagram result.\r\n *\r\n * @typedef {Object} ImportBPMNDiagramResult\r\n *\r\n * @property {Array<string>} warnings\r\n */\n\n/**\r\n* The importBpmnDiagram error.\r\n*\r\n* @typedef {Error} ImportBPMNDiagramError\r\n*\r\n* @property {Array<string>} warnings\r\n*/\n\n/**\r\n * Import the definitions into a diagram.\r\n *\r\n * Errors and warnings are reported through the specified callback.\r\n *\r\n * @param  {djs.Diagram} diagram\r\n * @param  {ModdleElement<Definitions>} definitions\r\n * @param  {ModdleElement<BPMNDiagram>} [bpmnDiagram] the diagram to be rendered\r\n * (if not provided, the first one will be rendered)\r\n *\r\n * Returns {Promise<ImportBPMNDiagramResult, ImportBPMNDiagramError>}\r\n */\nexport function importBpmnDiagram(diagram, definitions, bpmnDiagram) {\n  var importer, eventBus, translate;\n  var error,\n    warnings = [];\n\n  /**\r\n   * Walk the diagram semantically, importing (=drawing)\r\n   * all elements you encounter.\r\n   *\r\n   * @param {ModdleElement<Definitions>} definitions\r\n   * @param {ModdleElement<BPMNDiagram>} bpmnDiagram\r\n   */\n  function render(definitions, bpmnDiagram) {\n    var visitor = {\n      root: function (element) {\n        return importer.add(element);\n      },\n      element: function (element, parentShape) {\n        return importer.add(element, parentShape);\n      },\n      error: function (message, context) {\n        warnings.push({\n          message: message,\n          context: context\n        });\n      }\n    };\n    var walker = new BpmnTreeWalker(visitor, translate);\n\n    // traverse BPMN 2.0 document model,\n    // starting at definitions\n    walker.handleDefinitions(definitions, bpmnDiagram);\n  }\n  return new Promise(function (resolve, reject) {\n    try {\n      importer = diagram.get('bpmnImporter');\n      eventBus = diagram.get('eventBus');\n      translate = diagram.get('translate');\n      eventBus.fire('import.render.start', {\n        definitions: definitions\n      });\n      render(definitions, bpmnDiagram);\n      eventBus.fire('import.render.complete', {\n        error: error,\n        warnings: warnings\n      });\n      return resolve({\n        warnings: warnings\n      });\n    } catch (e) {\n      e.warnings = warnings;\n      return reject(e);\n    }\n  });\n}","map":{"version":3,"names":["BpmnTreeWalker","importBpmnDiagram","diagram","definitions","bpmnDiagram","importer","eventBus","translate","error","warnings","render","visitor","root","element","add","parentShape","message","context","push","walker","handleDefinitions","Promise","resolve","reject","get","fire","e"],"sources":["C:/Users/sam/final/camunda-react/node_modules/bpmn-js/lib/import/Importer.js"],"sourcesContent":["import BpmnTreeWalker from './BpmnTreeWalker';\r\n\r\n\r\n/**\r\n * The importBpmnDiagram result.\r\n *\r\n * @typedef {Object} ImportBPMNDiagramResult\r\n *\r\n * @property {Array<string>} warnings\r\n */\r\n\r\n/**\r\n* The importBpmnDiagram error.\r\n*\r\n* @typedef {Error} ImportBPMNDiagramError\r\n*\r\n* @property {Array<string>} warnings\r\n*/\r\n\r\n/**\r\n * Import the definitions into a diagram.\r\n *\r\n * Errors and warnings are reported through the specified callback.\r\n *\r\n * @param  {djs.Diagram} diagram\r\n * @param  {ModdleElement<Definitions>} definitions\r\n * @param  {ModdleElement<BPMNDiagram>} [bpmnDiagram] the diagram to be rendered\r\n * (if not provided, the first one will be rendered)\r\n *\r\n * Returns {Promise<ImportBPMNDiagramResult, ImportBPMNDiagramError>}\r\n */\r\nexport function importBpmnDiagram(diagram, definitions, bpmnDiagram) {\r\n\r\n  var importer,\r\n      eventBus,\r\n      translate;\r\n\r\n  var error,\r\n      warnings = [];\r\n\r\n  /**\r\n   * Walk the diagram semantically, importing (=drawing)\r\n   * all elements you encounter.\r\n   *\r\n   * @param {ModdleElement<Definitions>} definitions\r\n   * @param {ModdleElement<BPMNDiagram>} bpmnDiagram\r\n   */\r\n  function render(definitions, bpmnDiagram) {\r\n\r\n    var visitor = {\r\n\r\n      root: function(element) {\r\n        return importer.add(element);\r\n      },\r\n\r\n      element: function(element, parentShape) {\r\n        return importer.add(element, parentShape);\r\n      },\r\n\r\n      error: function(message, context) {\r\n        warnings.push({ message: message, context: context });\r\n      }\r\n    };\r\n\r\n    var walker = new BpmnTreeWalker(visitor, translate);\r\n\r\n    // traverse BPMN 2.0 document model,\r\n    // starting at definitions\r\n    walker.handleDefinitions(definitions, bpmnDiagram);\r\n  }\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    try {\r\n      importer = diagram.get('bpmnImporter');\r\n      eventBus = diagram.get('eventBus');\r\n      translate = diagram.get('translate');\r\n\r\n      eventBus.fire('import.render.start', { definitions: definitions });\r\n\r\n      render(definitions, bpmnDiagram);\r\n\r\n      eventBus.fire('import.render.complete', {\r\n        error: error,\r\n        warnings: warnings\r\n      });\r\n\r\n      return resolve({ warnings: warnings });\r\n    } catch (e) {\r\n\r\n      e.warnings = warnings;\r\n      return reject(e);\r\n    }\r\n  });\r\n}\r\n"],"mappings":"AAAA,OAAOA,cAAc,MAAM,kBAAkB;;AAG7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAiBA,CAACC,OAAO,EAAEC,WAAW,EAAEC,WAAW,EAAE;EAEnE,IAAIC,QAAQ,EACRC,QAAQ,EACRC,SAAS;EAEb,IAAIC,KAAK;IACLC,QAAQ,GAAG,EAAE;;EAEjB;AACF;AACA;AACA;AACA;AACA;AACA;EACE,SAASC,MAAMA,CAACP,WAAW,EAAEC,WAAW,EAAE;IAExC,IAAIO,OAAO,GAAG;MAEZC,IAAI,EAAE,SAAAA,CAASC,OAAO,EAAE;QACtB,OAAOR,QAAQ,CAACS,GAAG,CAACD,OAAO,CAAC;MAC9B,CAAC;MAEDA,OAAO,EAAE,SAAAA,CAASA,OAAO,EAAEE,WAAW,EAAE;QACtC,OAAOV,QAAQ,CAACS,GAAG,CAACD,OAAO,EAAEE,WAAW,CAAC;MAC3C,CAAC;MAEDP,KAAK,EAAE,SAAAA,CAASQ,OAAO,EAAEC,OAAO,EAAE;QAChCR,QAAQ,CAACS,IAAI,CAAC;UAAEF,OAAO,EAAEA,OAAO;UAAEC,OAAO,EAAEA;QAAQ,CAAC,CAAC;MACvD;IACF,CAAC;IAED,IAAIE,MAAM,GAAG,IAAInB,cAAc,CAACW,OAAO,EAAEJ,SAAS,CAAC;;IAEnD;IACA;IACAY,MAAM,CAACC,iBAAiB,CAACjB,WAAW,EAAEC,WAAW,CAAC;EACpD;EAEA,OAAO,IAAIiB,OAAO,CAAC,UAASC,OAAO,EAAEC,MAAM,EAAE;IAC3C,IAAI;MACFlB,QAAQ,GAAGH,OAAO,CAACsB,GAAG,CAAC,cAAc,CAAC;MACtClB,QAAQ,GAAGJ,OAAO,CAACsB,GAAG,CAAC,UAAU,CAAC;MAClCjB,SAAS,GAAGL,OAAO,CAACsB,GAAG,CAAC,WAAW,CAAC;MAEpClB,QAAQ,CAACmB,IAAI,CAAC,qBAAqB,EAAE;QAAEtB,WAAW,EAAEA;MAAY,CAAC,CAAC;MAElEO,MAAM,CAACP,WAAW,EAAEC,WAAW,CAAC;MAEhCE,QAAQ,CAACmB,IAAI,CAAC,wBAAwB,EAAE;QACtCjB,KAAK,EAAEA,KAAK;QACZC,QAAQ,EAAEA;MACZ,CAAC,CAAC;MAEF,OAAOa,OAAO,CAAC;QAAEb,QAAQ,EAAEA;MAAS,CAAC,CAAC;IACxC,CAAC,CAAC,OAAOiB,CAAC,EAAE;MAEVA,CAAC,CAACjB,QAAQ,GAAGA,QAAQ;MACrB,OAAOc,MAAM,CAACG,CAAC,CAAC;IAClB;EACF,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module"}